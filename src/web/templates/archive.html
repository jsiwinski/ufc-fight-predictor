{% extends "base.html" %}

{% block title %}Archive - UFC Predictions{% endblock %}

{% block content %}
<div class="event-header">
    <h1 class="event-name">All Events</h1>
    <p class="event-meta">Upcoming predictions and past backtest results</p>
</div>

{% set upcoming = events|selectattr('status', 'equalto', 'upcoming')|list %}
{% set completed = events|rejectattr('status', 'equalto', 'upcoming')|list %}

{# Upcoming Events Section #}
{% if upcoming %}
<div class="archive-section">
    <h2 class="archive-section-title">Upcoming Events</h2>
    <ul class="archive-list">
        {% for event in upcoming %}
        <li class="archive-item upcoming">
            <div>
                <a href="/event/{{ event.event_slug }}" class="archive-event">{{ event.event_name }}</a>
                <div class="archive-meta">{{ event.event_date }} &middot; {{ event.fight_count }} fights</div>
            </div>
            <div class="archive-status upcoming">
                <span class="status-badge">Upcoming</span>
            </div>
            <div>
                <a href="/event/{{ event.event_slug }}" class="archive-link">View predictions &rarr;</a>
            </div>
        </li>
        {% endfor %}
    </ul>
</div>
{% endif %}

{# Completed Events Section #}
{% if completed %}
<div class="archive-section">
    <h2 class="archive-section-title">Completed Events</h2>
    <ul class="archive-list">
        {% for event in completed %}
        <li class="archive-item completed">
            <div>
                <a href="/event/{{ event.event_slug }}" class="archive-event">{{ event.event_name }}</a>
                <div class="archive-meta">{{ event.event_date }} &middot; {{ event.fight_count }} fights</div>
            </div>
            <div class="archive-accuracy has-result">
                {% if event.accuracy_pct %}
                {{ event.correct }}/{{ event.total }} ({{ event.accuracy_pct }}%)
                {% else %}
                No data
                {% endif %}
            </div>
            <div>
                <a href="/event/{{ event.event_slug }}" class="archive-link">View results &rarr;</a>
            </div>
        </li>
        {% endfor %}
    </ul>
</div>
{% endif %}

{% if not events %}
<div class="empty-state">
    <h2>No events yet</h2>
    <p>Predictions will appear here after they're generated.</p>
    <p style="margin-top: 20px;">
        <a href="/" style="color: var(--red);">Generate predictions for the next event</a>
    </p>
</div>
{% endif %}
{% endblock %}
